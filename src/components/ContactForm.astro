<section
  class="bg-rose-800 sm:px-4 py-44 min-h-screen flex justify-center items-center"
>
  <div class="w-full">
    <div class="px-4 sm:px-0">
      <h2
        class="font-semibold tracking-tight text-4xl sm:text-6xl text-white mb-5"
      >
        CONTACT FORM
      </h2>
      <p class="max-w-[600px] text-base sm:text-xl text-rose-100">
        Enter your details below and I will get back to you as soon as possible.
      </p>
    </div>
    <form class="mt-14" aria-label="contact form" id="form">
      <div class="relative w-full">
        <input
          name="name"
          id="name"
          type="text"
          placeholder="Name ..."
          required
          class="text-2xl sm:text-3xl w-full py-5 px-5 bg-rose-700 text-white transition-colors duration-300 placeholder:text-rose-300 focus:outline-2 focus:-outline-offset-2 focus:outline-white"
        /><span class="absolute right-2 top-1 text-3xl">*</span>
      </div>
      <div class="relative w-full">
        <input
          name="email"
          id="email"
          type="email"
          placeholder="Email ..."
          required
          class="text-2xl sm:text-3xl w-full py-5 px-5 bg-rose-600 text-white transition-colors duration-300 placeholder:text-rose-300 focus:outline-2 focus:-outline-offset-2 focus:outline-white"
        /><span class="absolute right-2 top-1 text-3xl">*</span>
      </div>
      <div class="relative w-full">
        <textarea
          name="message"
          id="message"
          required
          placeholder="Message ..."
          rows="6"
          class="text-2xl sm:text-3xl w-full py-5 px-5 bg-rose-500 text-white transition-colors duration-300 placeholder:text-rose-300 focus:outline-2 focus:-outline-offset-2 focus:outline-white"
        ></textarea><span class="absolute right-2 top-1 text-3xl">*</span>
      </div>
      <div class="px-4 sm:px-0 w-full">
        <button
          type="submit"
          class="text-2xl sm:text-3xl mt-4 font-bold tracking-tight uppercase py-4 w-full rounded-md text-black bg-white focus:outline-4 focus:-outline-offset-4 focus:outline-black"
          >Submit</button
        >
      </div>
    </form>
  </div>
</section>

<script>
  const form = document.getElementById("form") as HTMLFormElement;
  const nameInput = document.getElementById("name") as HTMLInputElement;
  const emailInput = document.getElementById("email") as HTMLInputElement;
  const messageInput = document.getElementById(
    "message",
  ) as HTMLTextAreaElement;

  form.addEventListener("submit", (e) => {
    handleSubmit(e);
  });

  const handleSubmit = async (e: SubmitEvent) => {
    e.preventDefault();

    // check inputs
    // santise inputs
    // clear inputs
    // show error or success message

    try {
      const res = await fetch("/api/sendEmail.json", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          name: nameInput.value,
          email: emailInput.value,
          message: messageInput.value,
        }),
      });
      const data = await res.json();
    } catch (e) {
      console.error(e);
    }
  };
</script>
